<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Ù…Ø­Ø§ÙƒØ§Ø© Dynamic Island â€” Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©</title>

  <!-- ØªØ´ØºÙŠÙ„ ÙƒÙ€ Web App Ø¹Ù„Ù‰ iOS Ø¨Ø¯ÙˆÙ† Ø´Ø±ÙŠØ· Ø§Ù„Ù…ØªØµÙØ­ -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Dynamic Demo">
  <meta name="theme-color" content="#000000">

  <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ). ØªÙ‚Ø¯Ø± ØªØºÙŠÙ‘Ø± data URL Ø¨ØµÙˆØ±Ø© Ø´Ø¹Ø§Ø±Ùƒ -->
  <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAQAAACxvWnPAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABM0lEQVR42u3SwQ2DMBQF0VYVb7WMBzJbqgA2mJwQ2QYw8m0qf0P3x7rGg4y1nQp7Qf8qC5/8rX2Q4kAgAAAAAAAAAAAAAA4JcJ6u7U3S9Ew9m6q1g8eOqU2P8kQh8qYv2iYwG2z1xI0bQf2lq7q8KkI6P7p2P0L4Jr9x0x1t0b0x4gWkqkKkC1qg1zqQ1y2u0Jd7J0J4h3w1p0uZbqf6m8b7Y6m6dY8mGv1yC3qJ6M4i6Gq2sQyR7a2b1Qf3oJx7l3X9qkfdq2+3D4wHq3hV1q9uJw2Y1s3xV5Yy0jQ3m5LJrS7k0c8h0b9g3sQbHk2M8m1D7l0H+2Qf7kYHcG0P0AAAAAAAAAAAAAAAD8Cq6l3vCw6m3o7w8r8w8kZc5Jbq7AAAAAElFTkSuQmCC">

  <style>
    :root{
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --island-w: clamp(180px, 46vw, 280px);
      --island-h: 40px;
      --glass: rgba(14,14,18,.82);
      --border: rgba(255,255,255,.08);
      --txt: #fff;
      --accent: #60a5ff;
      --wa: #25D366;
      --danger: #ff6060;
    }
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    html,body{height:100%;margin:0;background:#000;color:var(--txt);font-family:system-ui,-apple-system,Segoe UI,Roboto}
    .stage{position:fixed;inset:0;padding-top:var(--safe-top);padding-bottom:var(--safe-bottom);display:flex;align-items:center;justify-content:center;overflow:hidden}
    .grid{position:absolute;inset:0;pointer-events:none;background:
      radial-gradient(1200px 600px at 50% -20%, rgba(96,165,255,.15), transparent 60%),
      radial-gradient(800px 400px at 30% 120%, rgba(37,211,102,.14), transparent 60%),
      #000;}

    /* Ø§Ù„Ø¬Ø²ÙŠØ±Ø© */
    .island{
      position:fixed; z-index:5;
      top: calc(var(--safe-top) + 8px); left:50%; transform:translateX(-50%);
      width: var(--island-w); height: var(--island-h);
      border-radius: 20px; background: var(--glass);
      border:1px solid var(--border);
      box-shadow: 0 12px 34px rgba(0,0,0,.45), 0 0 24px rgba(96,165,255,.18);
      backdrop-filter: blur(10px) saturate(140%); -webkit-backdrop-filter: blur(10px) saturate(140%);
      overflow: hidden;
    }
    .island .row{position:absolute;inset:0;display:flex;align-items:center;gap:10px;padding:8px 12px}
    .dot{width:8px;height:8px;border-radius:50%;background:var(--accent);box-shadow:0 0 8px var(--accent);animation:pulse 1.6s ease-in-out infinite}
    @keyframes pulse{0%,100%{transform:scale(.9);opacity:.9}50%{transform:scale(1.15);opacity:1}}

    /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
    .card{
      position:fixed; z-index:6; left:50%; transform:translateX(-50%);
      top: calc(var(--safe-top) + 8px + var(--island-h) + 8px);
      width: clamp(240px, 80vw, 560px);
      background: var(--glass); border:1px solid var(--border);
      border-radius:16px; box-shadow:0 20px 50px rgba(0,0,0,.55);
      opacity:0; pointer-events:none; translate: 0 -12px; 
      transition: opacity .18s ease, translate .24s ease;
      overflow:hidden;
    }
    .card.show{opacity:1; translate:0 0; pointer-events:auto}
    .card .hdr{display:flex;align-items:center;gap:10px;padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.06)}
    .appicon{width:18px;height:18px;border-radius:4px;background:#1d1d22;display:grid;place-items:center;font-size:12px}
    .appicon.wa{background:var(--wa)}
    .appname{font-weight:700;font-size:13px}
    .close{margin-inline-start:auto;border:1px solid rgba(255,255,255,.12);border-radius:10px;background:rgba(255,255,255,.04);color:#fff;font-size:12px;padding:4px 8px}
    .msg{padding:10px 12px;display:flex;gap:10px;align-items:flex-start}
    .who{font-weight:700}
    .text{opacity:.92}
    .actions{display:flex;gap:8px;padding:10px 12px;border-top:1px solid rgba(255,255,255,.06)}
    .btn{padding:8px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);color:#fff;font-weight:600}
    .btn.primary{background:rgba(96,165,255,.18)}
    .btn.danger{background:rgba(255,96,96,.18)}
    .tiny{font-size:12px;opacity:.85}

    /* Ø­Ø¨Ø© Ø§Ù„Ø­Ø§Ù„Ø© (ØµØ§Ù…Øª/Ø¹Ø§Ù…) */
    .pill{
      position:fixed; z-index:7; left:50%; transform:translateX(-50%);
      top: calc(var(--safe-top) + 8px + var(--island-h)/2 - 14px);
      translate: 0 -60px; opacity:0; pointer-events:none;
      background: var(--glass); border:1px solid var(--border); color:#fff;
      padding:6px 10px; border-radius:999px; display:flex; gap:8px; align-items:center;
      box-shadow: 0 10px 30px rgba(0,0,0,.4);
      transition: opacity .18s ease, translate .28s cubic-bezier(.2,.8,.2,1);
    }
    .pill.show{opacity:1; translate:0 0}
    .bell{display:inline-grid;place-items:center;width:16px;height:16px;border-radius:50%;background:rgba(255,255,255,.08)}
    .bell svg{width:12px;height:12px;display:block}

    /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ØªØ­Øª */
    .panel{
      position:fixed; left:50%; bottom: calc(14px + var(--safe-bottom));
      transform:translateX(-50%); display:flex; gap:10px; flex-wrap:wrap;
      justify-content:center; z-index:8;
    }
    .panel .btn{font-size:14px}

    /* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¬Ø²ÙŠØ±Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ */
    .title{font-weight:700;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .meter{display:flex;align-items:flex-end;gap:3px;height:14px}
    .bar{width:3px;background:#8cf;border-radius:2px;opacity:.9}
    @keyframes updown{from{height:6px}50%{height:14px}to{height:8px}}
    .bar:nth-child(1){animation:updown 1s ease-in-out infinite .0s}
    .bar:nth-child(2){animation:updown 1s ease-in-out infinite .15s}
    .bar:nth-child(3){animation:updown 1s ease-in-out infinite .3s}
    .bar:nth-child(4){animation:updown 1s ease-in-out infinite .45s}
    .bar:nth-child(5){animation:updown 1s ease-in-out infinite .6s}

    /* ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© */
    .hint{
      position:fixed; z-index:9; left:50%; transform:translateX(-50%);
      top: calc(var(--safe-top) + 56px);
      background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
      color:#fff; padding:8px 12px; border-radius:12px; font-size:12px;
      backdrop-filter: blur(8px);
    }
  </style>
</head>
<body>
  <div class="stage">
    <div class="grid"></div>

    <div class="island" id="island">
      <div class="row">
        <div class="dot" aria-hidden="true"></div>
        <div class="meter" aria-hidden="true">
          <div class="bar" style="height:8px"></div>
          <div class="bar" style="height:12px"></div>
          <div class="bar" style="height:9px"></div>
          <div class="bar" style="height:14px"></div>
          <div class="bar" style="height:7px"></div>
        </div>
        <div class="title" id="title">Ù…Ø­Ø§ÙƒØ§Ø© Dynamic Island â€” Ø¬Ø§Ù‡Ø²</div>
      </div>
    </div>

    <!-- Ø¥Ø´Ø¹Ø§Ø± ÙˆØ§ØªØ³Ø§Ø¨ -->
    <div class="card" id="waCard" role="dialog" aria-label="Ø¥Ø´Ø¹Ø§Ø± ÙˆØ§ØªØ³Ø§Ø¨">
      <div class="hdr">
        <div class="appicon wa">ğŸŸ¢</div>
        <div class="appname">WhatsApp</div>
        <button class="close" data-close="#waCard">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
      <div class="msg">
        <div>ğŸ‘¤</div>
        <div>
          <div class="who" id="waFrom">ØµØ¯ÙŠÙ‚Ùƒ</div>
          <div class="text" id="waText">ÙˆÙŠÙ†ÙƒØŸ Ù…Ø­ØªØ§Ø¬Ùƒ Ø¶Ø±ÙˆØ±ÙŠ Ø§Ù„Ø¢Ù†.</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn primary" onclick="alert('Ø±Ø¯ Ø³Ø±ÙŠØ¹ (Ù…Ø­Ø§ÙƒØ§Ø©)')">Ø±Ø¯ Ø³Ø±ÙŠØ¹</button>
        <button class="btn" data-close="#waCard">ØªÙ…ÙŠÙŠØ² ÙƒÙ…Ù‚Ø±ÙˆØ¡</button>
        <button class="btn danger" data-close="#waCard">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
    </div>

    <!-- Ø­Ø§Ù„Ø© ØµØ§Ù…Øª/Ø¹Ø§Ù… -->
    <div class="pill" id="modePill">
      <span class="bell" id="bellIcon">
        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M12 22a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2Zm6-6V11a6 6 0 1 0-12 0v5L4 18v2h16v-2l-2-2Z"/>
        </svg>
      </span>
      <span id="modeText">Ø§Ù„Ù†Ù…Ø·: Ø¹Ø§Ù…</span>
    </div>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
    <div class="panel">
      <button class="btn" onclick="triggerWA()">Ø±Ø³Ø§Ù„Ø© ÙˆØ§ØªØ³Ø§Ø¨ ØªØ¬Ø±ÙŠØ¨ÙŠØ©</button>
      <button class="btn" onclick="toggleMode()">ØªØ¨Ø¯ÙŠÙ„: ØµØ§Ù…Øª/Ø¹Ø§Ù…</button>
      <button class="btn" onclick="customWA()">Ø±Ø³Ø§Ù„Ø© Ù…Ø®ØµØµØ©â€¦</button>
    </div>

    <div class="hint">Ø£Ø¶ÙÙ Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ù† Safari â†’ Share â†’ Add to Home ScreenØŒ Ø«Ù… Ø§ÙØªØ­ Ù…Ù† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©.</div>
  </div>

<script>
  // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
  document.querySelectorAll('.close').forEach(b=>{
    b.addEventListener('click', e=>{
      const sel = e.currentTarget.getAttribute('data-close');
      if(sel) document.querySelector(sel).classList.remove('show');
    });
  });

  // Ø¥Ø´Ø¹Ø§Ø± ÙˆØ§ØªØ³Ø§Ø¨ (Ù…Ø­Ø§ÙƒØ§Ø©)
  function triggerWA(name="ØµØ¯ÙŠÙ‚Ùƒ", text="ÙˆØµÙ„ØªØŸ Ù…Ø­ØªØ§Ø¬Ùƒ Ø§Ù„Ø¢Ù†."){
    document.getElementById('waFrom').textContent = name;
    document.getElementById('waText').textContent = text;
    const card = document.getElementById('waCard');
    card.classList.add('show');
    puffIsland();
    clearTimeout(triggerWA._t);
    triggerWA._t = setTimeout(()=>card.classList.remove('show'), 6000);
  }

  // Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø®ØµØµ
  function customWA(){
    const n = prompt("Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„:", "Ø£Ø­Ù…Ø¯ Ø§Ù„ÙˆØ§ØªØ³");
    if(n===null) return;
    const t = prompt("Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:", "ÙˆÙŠÙ†ÙƒØŸ");
    if(t===null) return;
    triggerWA(n || "Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…", t || "â€¦");
  }

  // ØªØ¨Ø¯ÙŠÙ„ ØµØ§Ù…Øª/Ø¹Ø§Ù… (Ù…Ø­Ø§ÙƒØ§Ø©)
  let isSilent = false;
  function toggleMode(){
    isSilent = !isSilent;
    const pill = document.getElementById('modePill');
    const txt = document.getElementById('modeText');
    const bell = document.getElementById('bellIcon');
    txt.textContent = "Ø§Ù„Ù†Ù…Ø·: " + (isSilent ? "ØµØ§Ù…Øª" : "Ø¹Ø§Ù…");
    bell.innerHTML = isSilent
      ? `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 22a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2Zm6-6V11a6 6 0 1 0-12 0v5L4 18v2h16v-2l-2-2Z"/></svg>`
      : `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 22a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2Zm6-6V11a6 6 0 1 0-12 0v5L4 18v2h16v-2l-2-2Z"/></svg>`;
    pill.style.boxShadow = isSilent
      ? "0 12px 36px rgba(255,96,96,.25)"
      : "0 12px 36px rgba(96,165,255,.25)";
    pill.classList.add('show');
    puffIsland(isSilent ? 'danger' : 'normal');
    clearTimeout(toggleMode._t);
    toggleMode._t = setTimeout(()=>pill.classList.remove('show'), 2500);
  }

  // Ù†ÙØ®Ø© Ù…Ø±Ù†Ø© Ù„Ù„Ø¬Ø²ÙŠØ±Ø©
  function puffIsland(mode='normal'){
    const el = document.getElementById('island');
    el.animate(
      [
        { transform: 'translateX(-50%) scale(1)' },
        { transform: 'translateX(-50%) scale(1.06)' },
        { transform: 'translateX(-50%) scale(1)' }
      ],
      { duration: 320, easing: 'cubic-bezier(.2,.9,.2,1)' }
    );
    el.style.boxShadow = mode==='danger'
      ? "0 12px 34px rgba(0,0,0,.45), 0 0 24px rgba(255,96,96,.28)"
      : "0 12px 34px rgba(0,0,0,.45), 0 0 24px rgba(96,165,255,.22)";
    clearTimeout(puffIsland._t);
    puffIsland._t = setTimeout(()=>{
      el.style.boxShadow = "0 12px 34px rgba(0,0,0,.45), 0 0 24px rgba(96,165,255,.18)";
    }, 500);
  }

  // ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù„Ù…Ø³ Ø¹Ù„Ù‰ iOS
  document.addEventListener('touchstart', ()=>{}, {passive:true});
</script>
</body>
</html>
